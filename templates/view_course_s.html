{% extends 'base_s.html' %}

{% block content %}
    <h2>{% block title %} {{ course['title'] }} {% endblock %}</h2>
    <span class="badge badge-primary">Trimester : {{ course['trimester'] }}</span>
    <p>Course code : {{ course['code'] }}</p>
    <p>{{ course['content'] }}</p>
    {% if assigned_template %}
        {% if assigned_template.due_date %}
            <strong>Due Date:</strong> {{ assigned_template.due_date.strftime('%Y-%m-%d %H:%M') }}
        {% else %}
            <em>No due date set.</em>
        {% endif %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ assigned_template.template.name }}
            <a href="{{ url_for('fill_template', course_id = course.id) }}" class="btn btn-sm btn-success">Fill</a>
        </li>
    {% else %}
    <div class="card mb-3" style="background-color:rgb(238, 238, 238); color: #333;">
        <div class="card-body">
            <p>No templates assigned yet.</p>
    {% endif %}

    {% if not group %}
        <div class="alert alert-warning mt-4">
            <strong>You are not in a group for this course.</strong>
            <form method="POST" class="form-inline mt-2">
                <input type="text" name="group_code" class="form-control mr-2" placeholder="Enter group code (e.g. {{ course.code }}-01)" required>
                <button type="submit" class="btn btn-primary">Join / Create Group</button>
            </form>
        </div>
    {% else %}
        <div class="alert alert-success mt-4">
            You are in group <strong>{{ group.group_code }}</strong>.
        </div>
    {% endif %}

{% endblock %}