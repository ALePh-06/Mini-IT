<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Submission History</title>
    <style>
        .late-submission {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>Submission History</h1>

    <ul>
    {% for s in submissions %}
        <li>
            <strong>{{ s.group_name }}</strong> - {{ s.title }}<br>
            {{ s.description }}<br>
            <em>
                <span class="{% if s.is_late %}late-submission{% endif %}">
                    {{ s.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                    {% if s.is_late %}(Late){% endif %}
                </span>
            </em><br>
            {% if s.filename %}
                <a href="{{ url_for('download', filename=s.filename) }}" download>Download File</a> 
            {% endif %}

            {% if s.edited %}
                <p><strong>Edited</strong></p>
            {% else %}
                <p><strong>Original</strong></p>
            {% endif %}
        </li>
        <hr>
    {% endfor %}
    </ul>

    {% if session.user_type == 'lecturer' %}
    <!-- Show group name filter dropdown -->
    {% endif %}


    <!-- Filter by Group Name -->
    <form method="get" action="{{ url_for('history') }}">
        <label for="group_filter">Filter by Group Name:</label>
        <select name="group_name" id="group_filter" onchange="this.form.submit()">
            <option value="">All Groups</option>
            {% for group in group_names %}
                <option value="{{ group }}" {% if group == selected_group %}selected{% endif %}>{{ group }}</option>
            {% endfor %}
        </select>
    </form>

    <a href="/">Back to Form</a>
</body>
</html>
